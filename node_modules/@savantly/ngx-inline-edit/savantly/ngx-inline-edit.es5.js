import { Component, ElementRef, Input, NgModule, Renderer2, ViewChild, forwardRef } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule, NG_VALUE_ACCESSOR } from '@angular/forms';
import { MatButtonModule, MatFormFieldModule, MatIconModule, MatInputModule } from '@angular/material';
var InlineInputEditComponent = (function () {
    /**
     * @param {?} element
     * @param {?} _renderer
     */
    function InlineInputEditComponent(element, _renderer) {
        this._renderer = _renderer;
        /**
         * The control label *
         */
        this.label = '';
        /**
         * Type of input control *
         */
        this.type = 'text';
        /**
         * Input value required *
         */
        this.required = false;
        /**
         * Input control is disabled *
         */
        this.disabled = false;
        // color of the confirm button
        this.confirmColor = 'primary';
        // color of the cancel button
        this.cancelColor = 'warn';
        /**
         * private value of input *
         */
        this._value = '';
        /**
         * value prior to editing *
         */
        this.preValue = '';
        /**
         * We are editing *
         */
        this.editing = false;
        /**
         * Callback when the value is changing *
         */
        this.onChange = Function.prototype;
        /**
         * Callback when the input is accessed *
         */
        this.onTouched = Function.prototype;
    }
    Object.defineProperty(InlineInputEditComponent.prototype, "value", {
        /**
         * @return {?}
         */
        get: function () {
            return this._value;
        },
        /**
         * @param {?} v
         * @return {?}
         */
        set: function (v) {
            if (v !== this._value) {
                this._value = v;
                this.onChange(v);
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} value
     * @return {?}
     */
    InlineInputEditComponent.prototype.writeValue = function (value) {
        if (value !== undefined) {
            this._value = value;
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    InlineInputEditComponent.prototype.registerOnChange = function (fn) {
        this.onChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    InlineInputEditComponent.prototype.registerOnTouched = function (fn) {
        this.onTouched = fn;
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    InlineInputEditComponent.prototype.cancel = function ($event) {
        this.value = this.preValue;
        this.editing = false;
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    InlineInputEditComponent.prototype.confirm = function ($event) {
        this.editing = false;
        this.changed($event, this);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    InlineInputEditComponent.prototype.keypress = function ($event) {
        if ($event.keyCode === 13) {
            this.confirm($event);
        }
    };
    /**
     * @param {?} value
     * @return {?}
     */
    InlineInputEditComponent.prototype.edit = function (value) {
        var _this = this;
        if (this.disabled) {
            return;
        }
        this.preValue = value;
        this.editing = true;
        // Set focus on the input element, but we need to give it one cycle so it is ready
        setTimeout(function (_) { return _this.inlineEditControl.nativeElement.focus(); });
    };
    /**
     * @return {?}
     */
    InlineInputEditComponent.prototype.ngOnInit = function () {
    };
    return InlineInputEditComponent;
}());
InlineInputEditComponent.decorators = [
    { type: Component, args: [{
                selector: 'inline-input-edit',
                template: "\n    <div>\n    \t<mat-form-field>\n    \t\t<span matPrefix [innerHTML]=\"prefix\"></span>\n    \t\t<input #inlineEditControl matInput [readonly]=\"!editing\" [required]=\"required\" (keypress)=\"keypress($event)\" [name]=\"value\" [(ngModel)]=\"value\" [type]=\"type\" [placeholder]=\"label\" />\n    \t\t<span matSuffix  *ngIf=\"editing\">\n    \t\t\t<button mat-icon-button [color]=\"confirmColor\" (click)=\"confirm($event)\"><mat-icon>done</mat-icon></button>\n    \t\t\t<button mat-icon-button [color]=\"cancelColor\" (click)=\"cancel($event)\"><mat-icon>clear</mat-icon></button>\n    \t\t</span>\n    \t\t<span matSuffix  *ngIf=\"!editing\">\n    \t\t\t<button mat-icon-button [color]=\"'primary'\" (click)=\"edit(value)\"><mat-icon>mode_edit</mat-icon></button>\n    \t\t</span>\n    \t</mat-form-field>\n    </div>\n  ",
                styles: ["\n    :host mat-form-field {\n    \twidth:100%;\n    }\n  "],
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef(function () { return InlineInputEditComponent; }),
                        multi: true
                    }
                ]
            },] },
];
/**
 * @nocollapse
 */
InlineInputEditComponent.ctorParameters = function () { return [
    { type: ElementRef, },
    { type: Renderer2, },
]; };
InlineInputEditComponent.propDecorators = {
    'inlineEditControl': [{ type: ViewChild, args: ['inlineEditControl',] },],
    'label': [{ type: Input },],
    'type': [{ type: Input },],
    'required': [{ type: Input },],
    'disabled': [{ type: Input },],
    'prefix': [{ type: Input },],
    'confirmColor': [{ type: Input },],
    'cancelColor': [{ type: Input },],
    'changed': [{ type: Input },],
};
var InlineEditModule = (function () {
    function InlineEditModule() {
    }
    return InlineEditModule;
}());
InlineEditModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    FormsModule,
                    MatButtonModule, MatIconModule, MatInputModule, MatFormFieldModule
                ],
                declarations: [InlineInputEditComponent],
                exports: [InlineInputEditComponent]
            },] },
];
/**
 * @nocollapse
 */
InlineEditModule.ctorParameters = function () { return []; };
/**
 * Generated bundle index. Do not edit.
 */
export { InlineEditModule, InlineInputEditComponent };
//# sourceMappingURL=ngx-inline-edit.es5.js.map
